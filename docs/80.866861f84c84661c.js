"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[80],{5080:(v,h,e)=>{e.r(h),e.d(h,{WishlistComponent:()=>x});var n=e(6814),d=e(1120),p=e(8129),t=e(4769),l=e(9196),_=e(2425),r=e(6286);const u=function(c){return["/productdetails",c]};function g(c,m){if(1&c){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"i",7),t.NdJ("click",function(){const a=t.CHM(s).$implicit,C=t.oxw(2);return t.KtG(C.removeFav(a._id))}),t.qZA(),t.TgZ(3,"header",8),t._UZ(4,"img",9),t.TgZ(5,"h6",10),t._uU(6),t.qZA(),t.TgZ(7,"h6"),t._uU(8),t.ALo(9,"cuttext"),t.qZA(),t.TgZ(10,"div",11)(11,"span",12),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"span",13),t._UZ(15,"i",14),t._uU(16),t.qZA()()(),t.TgZ(17,"footer")(18,"button",15,16),t.NdJ("click",function(){const a=t.CHM(s).$implicit,C=t.MAs(19),O=t.oxw(2);return t.KtG(O.addProduct(a._id,C))}),t._uU(20," + Add To Cart"),t.qZA()()()()}if(2&c){const s=m.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(14,u,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("title",s.title)("alt",s.title),t.xp6(2),t.Oqu(s.category.name),t.xp6(2),t.Oqu(t.xi3(9,8,s.title,3)),t.xp6(4),t.Oqu(t.xi3(13,11,s.price,"EGP ")),t.xp6(4),t.hij(" ",s.ratingsAverage," ")}}function E(c,m){if(1&c&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,g,21,16,"div",4),t.qZA()()),2&c){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.products)}}function f(c,m){1&c&&(t.TgZ(0,"div",17),t._uU(1,"Your WishList Is Empty..."),t.qZA())}let x=(()=>{class c{constructor(s,i,o,a){this._WishlistService=s,this._ToastrService=i,this._CartService=o,this._Renderer2=a,this.products=[],this.wishListData=[]}ngOnInit(){this._WishlistService.getWishList().subscribe({next:s=>{this.products=s.data;const i=s.data.map(o=>o._id);this.wishListData=i}})}removeFav(s){this._WishlistService.removeWishListItem(s).subscribe({next:i=>{this._ToastrService.success(i.message),this.wishListData=i.data;const o=this.products.filter(a=>this.wishListData.includes(a._id));this.products=o}})}addProduct(s,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addToCart(s).subscribe({next:o=>{this._ToastrService.success(o.message),this._Renderer2.removeAttribute(i,"disabled"),this._CartService.cartNumber.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(i,"disabled")}})}static#t=this.\u0275fac=function(i){return new(i||c)(t.Y36(l.M),t.Y36(_._W),t.Y36(r.N),t.Y36(t.Qsj))};static#s=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","py-4",4,"ngIf","ngIfElse"],["msg",""],[1,"py-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["title","Remove From WishList",1,"fa-regular","fa-trash-can","heart",3,"click"],["role","button",3,"routerLink"],[1,"w-100","mb-2",3,"src","title","alt"],[1,"text-main"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h6"],[1,"text-muted"],[1,"fas","fa-star","rating-color"],[1,"main-btn","w-100",3,"click"],["btnAdd",""],[1,"alert","alert-danger","w-50","text-center","mx-auto","p-5","h3"]],template:function(i,o){if(1&i&&(t.YNc(0,E,3,1,"section",0),t.YNc(1,f,2,0,"ng-template",null,1,t.W1O)),2&i){const a=t.MAs(2);t.Q6J("ngIf",o.products.length>0)("ngIfElse",a)}},dependencies:[n.ez,n.sg,n.O5,n.H9,d.rH,p.r]})}return c})()},6286:(v,h,e)=>{e.d(h,{N:()=>t});var n=e(5619),d=e(4769),p=e(9862);let t=(()=>{class l{constructor(r){this._HttpClient=r,this.cartNumber=new n.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(r){return this._HttpClient.post(this.baseUrl+"cart",{productId:r})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(r){return this._HttpClient.delete(this.baseUrl+`cart/${r}`)}updateCartCount(r,u){return this._HttpClient.put(this.baseUrl+`cart/${r}`,{count:u})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(r,u){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${r}?url=http://localhost:4200`,{shippingAddress:u})}static#t=this.\u0275fac=function(u){return new(u||l)(d.LFG(p.eN))};static#s=this.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},9196:(v,h,e)=>{e.d(h,{M:()=>p});var n=e(4769),d=e(9862);let p=(()=>{class t{constructor(_){this._HttpClient=_,this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToWishList(_){return this._HttpClient.post(this.baseUrl+"wishlist",{productId:_})}getWishList(){return this._HttpClient.get(this.baseUrl+"wishlist")}removeWishListItem(_){return this._HttpClient.delete(this.baseUrl+`wishlist/${_}`)}static#t=this.\u0275fac=function(r){return new(r||t)(n.LFG(d.eN))};static#s=this.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);